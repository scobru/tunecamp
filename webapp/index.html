<!DOCTYPE html>
<html lang="en" data-theme="tunecamp">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TuneCamp Server</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="navbar bg-base-200 border-b border-white/5 sticky top-0 z-50">
      <div class="navbar-start">
        <div class="nav-brand flex items-center gap-3 px-4">
          <img src="tunecamp.svg" alt="TuneCamp" class="w-9 h-9 drop-shadow-[0_0_8px_var(--color-primary)]">
          <span class="brand-name text-xl font-bold tracking-tight text-white">TuneCamp</span>
        </div>
      </div>

      <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1 gap-1">
          <li><a href="#/" class="nav-link active rounded-full" data-route="home">Home</a></li>
          <li><a href="#/albums" class="nav-link rounded-full" data-route="albums">Albums</a></li>
          <li><a href="#/tracks" class="nav-link rounded-full" data-route="tracks">Tracks</a></li>
          <li><a href="#/artists" class="nav-link rounded-full" data-route="artists">Artists</a></li>
          <li><a href="#/stats" class="nav-link rounded-full" data-route="stats">Stats</a></li>
          <li><a href="#/browser" class="nav-link rounded-full" data-route="browser">Browser</a></li>
          <li><a href="#/network" class="nav-link rounded-full" data-route="network">Network</a></li>
          <li><a href="#/playlists" class="nav-link rounded-full" data-route="playlists">Playlists</a></li>
          <li><a href="#/search" class="nav-link rounded-full" data-route="search">Search</a></li>
          <li><a href="#/support" class="nav-link rounded-full" data-route="support">Support</a></li>
        </ul>
      </div>

      <div class="navbar-end flex gap-2 px-4">
        <div class="nav-auth items-center gap-2 flex" id="nav-auth">
          <div class="user-menu flex items-center gap-2" id="user-menu" style="display: none;">
            <span class="user-name text-sm opacity-80" id="user-name"></span>
            <button class="btn btn-sm btn-ghost" id="user-logout-btn" title="Logout">Logout</button>
          </div>
          <button class="btn btn-sm btn-outline btn-primary rounded-full" id="user-login-btn">User</button>
          <button class="btn btn-sm btn-primary rounded-full accent-gradient border-none" id="admin-btn">Admin</button>
        </div>

        <button class="btn btn-ghost lg:hidden" id="mobile-menu-toggle" aria-label="Toggle navigation menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
          </svg>
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content pb-32" id="main-content">
      <!-- Content loaded dynamically -->
    </main>

    <!-- Audio Player -->
    <div
      class="player fixed bottom-0 left-0 right-0 bg-base-200/90 backdrop-blur-xl border-t border-white/5 p-4 lg:p-6 flex flex-col lg:flex-row items-center gap-4 lg:gap-12 z-50 shadow-2xl"
      id="player">
      <div class="player-track flex items-center gap-4 min-w-[280px] w-full lg:w-auto">
        <div class="player-cover w-14 h-14 rounded-lg bg-base-300 flex items-center justify-center shrink-0 shadow-lg"
          id="player-cover">
          <span class="player-cover-icon text-2xl">üéµ</span>
        </div>
        <div class="player-info overflow-hidden">
          <div class="player-title font-bold text-white truncate" id="player-title">No track playing</div>
          <div class="player-artist text-sm opacity-60 truncate" id="player-artist"></div>
        </div>
      </div>

      <div class="player-controls flex items-center gap-4">
        <button class="btn btn-circle btn-ghost btn-sm text-xl" id="prev-btn">‚èÆ</button>
        <button
          class="btn btn-circle btn-primary bg-white text-black hover:bg-white/90 hover:scale-105 transition-all text-xl shadow-[0_0_20px_rgba(255,255,255,0.2)]"
          id="play-btn">‚ñ∂</button>
        <button class="btn btn-circle btn-ghost btn-sm text-xl" id="next-btn">‚è≠</button>
        <div class="flex items-center ml-2 border-l border-white/10 pl-4 gap-1">
          <button class="btn btn-ghost btn-xs btn-circle" id="lyrics-btn" title="Lyrics">üé§</button>
          <button class="btn btn-ghost btn-xs btn-circle" id="queue-btn" title="Queue">‚ò∞</button>
        </div>
      </div>

      <div class="player-progress flex-1 flex items-center gap-3 w-full lg:w-auto">
        <span class="time text-xs opacity-50 font-mono min-w-[40px]" id="current-time">0:00</span>
        <input type="range" class="range range-xs range-primary flex-1" id="progress-bar" min="0" max="100" value="0">
        <span class="time text-xs opacity-50 font-mono min-w-[40px]" id="total-time">0:00</span>
      </div>

      <div class="player-volume hidden lg:flex items-center gap-3">
        <span class="opacity-50 text-sm">üîä</span>
        <input type="range" class="range range-xs w-24" id="volume-bar" min="0" max="100" value="80">
      </div>
      <audio id="audio-element" preload="metadata"></audio>
    </div>

    <!-- Lyrics Panel -->
    <div class="lyrics-panel" id="lyrics-panel" style="display: none;">
      <div class="lyrics-header">
        <h3>Lyrics</h3>
        <button class="close-btn"
          onclick="document.getElementById('lyrics-panel').style.display='none'">&times;</button>
      </div>
      <div class="lyrics-content" id="lyrics-content">
        Loading...
      </div>
    </div>

    <!-- Queue Panel -->
    <div class="lyrics-panel queue-panel" id="queue-panel" style="display: none; right: 350px;">
      <div class="lyrics-header">
        <h3>Queue</h3>
        <button class="close-btn" onclick="document.getElementById('queue-panel').style.display='none'">&times;</button>
      </div>
      <div class="lyrics-content" id="queue-content">
        <!-- populated by js -->
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <dialog id="login-modal" class="modal">
    <div class="modal-box bg-base-100 border border-white/5">
      <div class="flex items-center justify-between mb-6">
        <h2 id="modal-title" class="text-2xl font-bold">Admin Login</h2>
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost" id="modal-close">‚úï</button>
        </form>
      </div>
      <div id="modal-body">
        <form id="login-form" class="space-y-4">
          <div class="form-control">
            <label class="label" for="username">
              <span class="label-text">Username</span>
            </label>
            <input type="text" id="username" placeholder="admin" class="input input-bordered w-full" required
              autocomplete="username">
          </div>
          <div class="form-control">
            <label class="label" for="password">
              <span class="label-text">Password</span>
            </label>
            <input type="password" id="password" placeholder="Enter admin password" class="input input-bordered w-full"
              required autocomplete="current-password">
          </div>
          <button type="submit" class="btn btn-primary w-full accent-gradient border-none mt-4">Login</button>
        </form>
        <div id="login-error" class="text-error text-sm mt-2"></div>
      </div>
    </div>
  </dialog>

  <!-- User Auth Modal -->
  <dialog id="user-auth-modal" class="modal">
    <div class="modal-box bg-base-100 border border-white/5 max-w-sm">
      <div class="flex items-center justify-between mb-6">
        <h2 id="user-modal-title" class="text-2xl font-bold">Login</h2>
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost" id="user-modal-close">‚úï</button>
        </form>
      </div>

      <div id="user-modal-body" class="space-y-4">
        <!-- Tab buttons -->
        <div class="tabs tabs-box bg-base-200 p-1 mb-4">
          <button class="tab tab-active flex-1" id="tab-login">Login</button>
          <button class="tab flex-1" id="tab-register">Register</button>
        </div>

        <!-- Login Form -->
        <form id="user-login-form" class="space-y-4">
          <div class="form-control">
            <label class="label" for="login-username">
              <span class="label-text">Username</span>
            </label>
            <input type="text" id="login-username" placeholder="your_username" class="input input-bordered w-full"
              required autocomplete="username">
          </div>
          <div class="form-control">
            <label class="label" for="login-password">
              <span class="label-text">Password</span>
            </label>
            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="input input-bordered w-full" required
              autocomplete="current-password">
          </div>
          <button type="submit" class="btn btn-primary w-full accent-gradient border-none mt-2">Login</button>
        </form>

        <!-- Register Form (hidden by default) -->
        <form id="user-register-form" class="space-y-4" style="display: none;">
          <div class="form-control">
            <label class="label" for="reg-username">
              <span class="label-text">Choose a username</span>
            </label>
            <input type="text" id="reg-username" placeholder="your_username" class="input input-bordered w-full"
              required autocomplete="username">
            <label class="label">
              <span class="label-text-alt opacity-70">At least 3 characters</span>
            </label>
          </div>
          <div class="form-control">
            <label class="label" for="reg-password">
              <span class="label-text">Password</span>
            </label>
            <input type="password" id="reg-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="input input-bordered w-full" required
              autocomplete="new-password">
            <label class="label">
              <span class="label-text-alt opacity-70">At least 6 characters</span>
            </label>
          </div>
          <div class="form-control">
            <label class="label" for="reg-password-confirm">
              <span class="label-text">Confirm Password</span>
            </label>
            <input type="password" id="reg-password-confirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="input input-bordered w-full"
              required autocomplete="new-password">
          </div>
          <button type="submit" class="btn btn-primary w-full accent-gradient border-none mt-2">Create Account</button>
        </form>

        <div id="user-auth-error" class="text-error text-sm mt-2"></div>
      </div>
    </div>
  </dialog>

  <dialog id="add-to-playlist-modal" class="modal">
    <div class="modal-box bg-base-100 border border-white/5 max-w-sm">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">Add to Playlist</h2>
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost" id="playlist-modal-close">‚úï</button>
        </form>
      </div>
      <div>
        <div id="playlist-selection" class="flex flex-col gap-2">
          <!-- Populated dynamically -->
        </div>
        <button class="btn btn-outline btn-primary w-full mt-6" id="create-new-playlist-btn">
          + Create New Playlist
        </button>
      </div>
    </div>
  </dialog>

  <!-- Unlock Code Modal -->
  <dialog id="unlock-modal" class="modal">
    <div class="modal-box bg-base-100 border border-white/5 max-w-sm">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-bold">Unlock Download</h2>
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost" id="unlock-modal-close">‚úï</button>
        </form>
      </div>
      <div>
        <p class="text-sm opacity-70 mb-6">Enter your unlock code to download this release.</p>
        <form id="unlock-form" class="space-y-4">
          <div class="form-control">
            <label class="label" for="unlock-code-input">
              <span class="label-text">Unlock Code</span>
            </label>
            <input type="text" id="unlock-code-input" placeholder="XXXX-XXXX"
              class="input input-bordered w-full font-mono uppercase" required>
          </div>
          <button type="submit" class="btn btn-primary w-full accent-gradient border-none mt-2">Unlock &
            Download</button>
        </form>
        <div id="unlock-error" class="text-error text-sm mt-2"></div>
      </div>
    </div>
  </dialog>

  <script src="js/gleam-string-utils.js"></script>
  <script src="js/api.js"></script>
  <script src="js/user-auth.js"></script>
  <script src="js/player.js"></script>
  <script src="js/app.js"></script>
</body>

</html>