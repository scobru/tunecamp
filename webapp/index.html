<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TuneCamp Server</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-brand">
        <img src="tunecamp.svg" alt="TuneCamp" class="logo">
        <span class="brand-name">TuneCamp</span>
      </div>
      <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation menu">
        <span id="menu-icon">‚ò∞</span>
      </button>
      <div class="nav-links" id="nav-links">
        <a href="#/" class="nav-link active" data-route="home">Home</a>
        <a href="#/albums" class="nav-link" data-route="albums">Albums</a>
        <a href="#/tracks" class="nav-link" data-route="tracks">Tracks</a>
        <a href="#/artists" class="nav-link" data-route="artists">Artists</a>
        <a href="#/stats" class="nav-link" data-route="stats">Stats</a>
        <a href="#/browser" class="nav-link" data-route="browser">Browser</a>
        <a href="#/network" class="nav-link" data-route="network">Network</a>
        <a href="#/playlists" class="nav-link" data-route="playlists">Playlists</a>
        <a href="#/search" class="nav-link" data-route="search">Search</a>
        <a href="#/support" class="nav-link" data-route="support">Support</a>
      </div>
      <div class="nav-auth" id="nav-auth">
        <div class="user-menu" id="user-menu" style="display: none;">
          <span class="user-name" id="user-name"></span>
          <button class="btn btn-sm btn-ghost" id="user-logout-btn" title="Logout">üëã</button>
        </div>
        <button class="btn btn-outline btn-sm" id="user-login-btn">Login</button>
        <button class="btn btn-outline" id="admin-btn">Admin</button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
      <!-- Content loaded dynamically -->
    </main>

    <!-- Audio Player -->
    <div class="player" id="player">
      <div class="player-track">
        <div class="player-cover" id="player-cover">
          <span class="player-cover-icon">üéµ</span>
        </div>
        <div class="player-info">
          <div class="player-title" id="player-title">No track playing</div>
          <div class="player-artist" id="player-artist"></div>
        </div>
      </div>
      <div class="player-controls">
        <button class="player-btn" id="prev-btn">‚èÆ</button>
        <button class="player-btn play-btn" id="play-btn">‚ñ∂</button>
        <button class="player-btn" id="next-btn">‚è≠</button>
        <button class="player-btn btn-xs" id="lyrics-btn" title="Lyrics" style="margin-left: 10px;">üé§</button>
        <button class="player-btn btn-xs" id="queue-btn" title="Queue" style="margin-left: 10px;">‚ò∞</button>
      </div>
      <div class="player-progress">
        <span class="time" id="current-time">0:00</span>
        <input type="range" class="progress-bar" id="progress-bar" min="0" max="100" value="0">
        <span class="time" id="total-time">0:00</span>
      </div>
      <div class="player-volume">
        <span>üîä</span>
        <input type="range" class="volume-bar" id="volume-bar" min="0" max="100" value="80">
      </div>
      <audio id="audio-element"></audio>
    </div>

    <!-- Lyrics Panel -->
    <div class="lyrics-panel" id="lyrics-panel" style="display: none;">
      <div class="lyrics-header">
        <h3>Lyrics</h3>
        <button class="close-btn"
          onclick="document.getElementById('lyrics-panel').style.display='none'">&times;</button>
      </div>
      <div class="lyrics-content" id="lyrics-content">
        Loading...
      </div>
    </div>

    <!-- Queue Panel -->
    <div class="lyrics-panel queue-panel" id="queue-panel" style="display: none; right: 350px;">
      <div class="lyrics-header">
        <h3>Queue</h3>
        <button class="close-btn" onclick="document.getElementById('queue-panel').style.display='none'">&times;</button>
      </div>
      <div class="lyrics-content" id="queue-content">
        <!-- populated by js -->
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div class="modal" id="login-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Admin Login</h2>
        <button class="modal-close" id="modal-close">&times;</button>
      </div>
      <div class="modal-body" id="modal-body">
        <form id="login-form">
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" placeholder="Enter admin password" required>
          </div>
          <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>
        <div id="login-error" class="error-message"></div>
      </div>
    </div>
  </div>

  <!-- User Auth Modal -->
  <div class="modal" id="user-auth-modal">
    <div class="modal-content modal-sm">
      <div class="modal-header">
        <h2 id="user-modal-title">Login</h2>
        <button class="modal-close" id="user-modal-close">&times;</button>
      </div>
      <div class="modal-body" id="user-modal-body">
        <!-- Tab buttons -->
        <div class="auth-tabs">
          <button class="auth-tab active" id="tab-login">Login</button>
          <button class="auth-tab" id="tab-register">Register</button>
        </div>

        <!-- Login Form -->
        <form id="user-login-form">
          <div class="form-group">
            <label for="login-username">Username</label>
            <input type="text" id="login-username" placeholder="your_username" required>
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          </div>
          <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>

        <!-- Register Form (hidden by default) -->
        <form id="user-register-form" style="display: none;">
          <div class="form-group">
            <label for="reg-username">Choose a username</label>
            <input type="text" id="reg-username" placeholder="your_username" required>
            <small class="form-hint">At least 3 characters</small>
          </div>
          <div class="form-group">
            <label for="reg-password">Password</label>
            <input type="password" id="reg-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
            <small class="form-hint">At least 6 characters</small>
          </div>
          <div class="form-group">
            <label for="reg-password-confirm">Confirm Password</label>
            <input type="password" id="reg-password-confirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          </div>
          <button type="submit" class="btn btn-primary btn-block">Create Account</button>
        </form>

        <div id="user-auth-error" class="error-message"></div>
      </div>
    </div>
  </div>

  <div class="modal" id="add-to-playlist-modal">
    <div class="modal-content modal-sm">
      <div class="modal-header">
        <h2>Add to Playlist</h2>
        <button class="modal-close" id="playlist-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div id="playlist-selection" class="playlist-list">
          <!-- Populated dynamically -->
        </div>
        <button class="btn btn-outline btn-block" id="create-new-playlist-btn" style="margin-top: 1rem;">
          + Create New Playlist
        </button>
      </div>
    </div>
  </div>

  <!-- Unlock Code Modal -->
  <div class="modal" id="unlock-modal">
    <div class="modal-content modal-sm">
      <div class="modal-header">
        <h2>Unlock Download</h2>
        <button class="modal-close" id="unlock-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Enter your unlock code to download this release.
        </p>
        <form id="unlock-form">
          <div class="form-group">
            <label for="unlock-code-input">Unlock Code</label>
            <input type="text" id="unlock-code-input" placeholder="XXXX-XXXX" required
              style="font-family: monospace; text-transform: uppercase;">
          </div>
          <button type="submit" class="btn btn-primary btn-block">Unlock & Download</button>
        </form>
        <div id="unlock-error" class="error-message"></div>
      </div>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script src="js/user-auth.js"></script>
  <script src="js/player.js"></script>
  <script src="js/app.js"></script>
</body>

</html>