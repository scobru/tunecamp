<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Music Catalog</title>
  <meta name="description" content="Independent music releases">
  <!-- Tunecamp Metadata (for community registry) -->
  <meta name="generator" content="Tunecamp 1.0.1">
  <meta name="tunecamp-title" content="My Music Catalog">
  <meta name="tunecamp-artist" content="Artist Name">
  <!-- RSS/Atom Feeds -->
  <link rel="alternate" type="application/rss+xml" title="My Music Catalog RSS Feed" href="./feed.xml">
  <link rel="alternate" type="application/atom+xml" title="My Music Catalog Atom Feed" href="./atom.xml">
  <link rel="stylesheet" href="./assets/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    // Initialize theme from localStorage or system preference
    (function () {
      const saved = localStorage.getItem('theme');
      if (saved) {
        document.documentElement.setAttribute('data-theme', saved);
      } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="header-row">
        <h1 class="site-title">
          <a href="./index.html">My Music Catalog</a>
        </h1>
      </div>
      <p class="site-description">Independent music releases</p>
    </div>
  </header>

  <main class="site-main">
    <div class="container">
  <section class="artist-section">
    <div class="artist-header">
      <div class="artist-info">
        <h2>Artist Name</h2>
        <p class="artist-bio">Write your biography here.</p>
      </div>
    </div>
  </section>

  <section class="releases-section">
    <h2>Releases</h2>
    
    <!-- Search and Filter Controls -->
    <div class="releases-controls">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Search releases..." autocomplete="off">
      </div>
      
      <div class="filter-controls">
        <select id="genreFilter" class="filter-select">
          <option value="">All Genres</option>
        </select>
        
        <select id="sortBy" class="filter-select">
          <option value="date-desc">Newest First</option>
          <option value="date-asc">Oldest First</option>
          <option value="title-asc">Title A-Z</option>
          <option value="title-desc">Title Z-A</option>
        </select>
      </div>
    </div>
    
    <p class="no-releases">No releases yet. Check back soon!</p>
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('searchInput');
  const genreFilter = document.getElementById('genreFilter');
  const sortBy = document.getElementById('sortBy');
  const releasesGrid = document.getElementById('releasesGrid');
  const noResults = document.getElementById('noResults');
  
  if (!releasesGrid) return;
  
  const releaseCards = Array.from(releasesGrid.querySelectorAll('.release-card'));
  
  // Populate genre filter
  const allGenres = new Set();
  releaseCards.forEach(card => {
    const genres = card.dataset.genres;
    if (genres) {
      genres.split(',').forEach(g => allGenres.add(g.trim()));
    }
  });
  
  Array.from(allGenres).sort().forEach(genre => {
    const option = document.createElement('option');
    option.value = genre;
    option.textContent = genre;
    genreFilter.appendChild(option);
  });
  
  function filterAndSort() {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedGenre = genreFilter.value;
    const sortValue = sortBy.value;
    
    // Filter
    let visibleCards = releaseCards.filter(card => {
      const title = (card.dataset.title || '').toLowerCase();
      const description = (card.dataset.description || '').toLowerCase();
      const genres = card.dataset.genres || '';
      
      const matchesSearch = !searchTerm || 
        title.includes(searchTerm) || 
        description.includes(searchTerm);
      
      const matchesGenre = !selectedGenre || 
        genres.split(',').map(g => g.trim()).includes(selectedGenre);
      
      return matchesSearch && matchesGenre;
    });
    
    // Sort
    visibleCards.sort((a, b) => {
      switch (sortValue) {
        case 'date-desc':
          return new Date(b.dataset.date) - new Date(a.dataset.date);
        case 'date-asc':
          return new Date(a.dataset.date) - new Date(b.dataset.date);
        case 'title-asc':
          return (a.dataset.title || '').localeCompare(b.dataset.title || '');
        case 'title-desc':
          return (b.dataset.title || '').localeCompare(a.dataset.title || '');
        default:
          return 0;
      }
    });
    
    // Apply visibility and order
    releaseCards.forEach(card => {
      card.style.display = 'none';
      card.style.order = '';
    });
    
    visibleCards.forEach((card, index) => {
      card.style.display = '';
      card.style.order = index;
    });
    
    // Show/hide no results message
    if (noResults) {
      noResults.style.display = visibleCards.length === 0 ? 'block' : 'none';
    }
  }
  
  searchInput.addEventListener('input', filterAndSort);
  genreFilter.addEventListener('change', filterAndSort);
  sortBy.addEventListener('change', filterAndSort);
});
</script>


  </main>

  <footer class="site-footer">
    <div class="container">
      <p>
        &copy; Artist Name -
        Powered by <a href="https://github.com/scobru/tunecamp" target="_blank">Tunecamp</a>
      </p>
      <div class="social-links">
        <a href="https://example.com" target="_blank" rel="noopener" class="social-link">
          <i class="fab fa-website"></i>
        </a>
        <a href="https://artistname.bandcamp.com" target="_blank" rel="noopener" class="social-link">
          <i class="fab fa-bandcamp"></i>
        </a>
      </div>
    </div>
  </footer>

  <script src="./assets/player.js"></script>

  <!-- Interactive Theme Widget -->
  <script src="./assets/theme-widget.js"></script>

  <!-- Tunecamp Community Registry (auto-registers site) -->
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script src="./assets/community-registry.js"></script>
</body>

</html>